<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Sean&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="MiNiFi System Administrator’s GuideApache NiFi Team MiNiFi Homepage Automatic Warm-RedeployWhen many MiNiFi agents running on the edge, it may not be possible to manually stop, edit the config.yml an">
<meta name="keywords" content="HDP HDF BigData">
<meta property="og:type" content="article">
<meta property="og:title" content="Sean&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/2017/05/15/System_Admin_Guide/index.html">
<meta property="og:site_name" content="Sean&#39;s Blog">
<meta property="og:description" content="MiNiFi System Administrator’s GuideApache NiFi Team MiNiFi Homepage Automatic Warm-RedeployWhen many MiNiFi agents running on the edge, it may not be possible to manually stop, edit the config.yml an">
<meta property="og:locale" content="CN">
<meta property="og:updated_time" content="2017-05-15T15:35:44.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sean&#39;s Blog">
<meta name="twitter:description" content="MiNiFi System Administrator’s GuideApache NiFi Team MiNiFi Homepage Automatic Warm-RedeployWhen many MiNiFi agents running on the edge, it may not be possible to manually stop, edit the config.yml an">
  
    <link rel="alternate" href="/atom.xml" title="Sean&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Sean&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">咦，你来啦！</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-System_Admin_Guide" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/15/System_Admin_Guide/" class="article-date">
  <time datetime="2017-05-15T15:35:44.000Z" itemprop="datePublished">2017-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <!--
 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.
 The ASF licenses this file to You under the Apache License, Version 2.0
 (the "License"); you may not use this file except in compliance with
 the License.  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<h1 id="MiNiFi-System-Administrator’s-Guide"><a href="#MiNiFi-System-Administrator’s-Guide" class="headerlink" title="MiNiFi System Administrator’s Guide"></a>MiNiFi System Administrator’s Guide</h1><p><a href="dev@nifi.apache.org">Apache NiFi Team</a></p>
<p><a href="https://nifi.apache.org/minifi/index.html" target="_blank" rel="noopener">MiNiFi Homepage</a></p>
<h1 id="Automatic-Warm-Redeploy"><a href="#Automatic-Warm-Redeploy" class="headerlink" title="Automatic Warm-Redeploy"></a>Automatic Warm-Redeploy</h1><p>When many MiNiFi agents running on the edge, it may not be possible to manually stop, edit the config.yml and then restart every one every time their configuration needs to change. The Config Change Coordinator and its Ingestors were designed to automatically redeploy in response to a configuration update.</p>
<p>The Config Change Ingestors are the means by which the agent is notified of a potential new configuration. Currently there are three:</p>
<ul>
<li>FileChangeIngestor</li>
<li>RestChangeIngestor</li>
<li>PullHttpChangeIngestor</li>
</ul>
<p>After a new configuration has been pulled/received the Ingestors use a Differentiator in order to determine if the currently running config is different than the new config. Which Differentiator is used, is configurable for each Ingestor. Currently there is only one Differentiator:</p>
<ul>
<li>WholeConfigDifferentiator: Compares the entire new config with the currently running one, byte for byte.</li>
</ul>
<p>After a new config is determined to be new, the MiNiFi agent will attempt to restart. The bootstrap first saves the old config into a swap file. The bootstrap monitors the agent as it restarts and if it fails it will roll back to the old config. If it succeeds then the swap file will be deleted and the agent will start processing using the new config.</p>
<p><strong>Note:</strong> Data left in connections when the agent attempts to restart will either be mapped to a connection with the same ID in the new config, or orphaned and deleted.</p>
<p>The configuration for Warm-Redeploy is done in the bootstrap.conf and primarily revolve around the Config Change Ingestors. The configuration in the bootstrap.conf is done using the “nifi.minifi.notifier.ingestors” key followed by the full path name of the desired Ingestor implementation to run. Use a comma separated list  to define more than one Ingestor implementation. For example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nifi.minifi.notifier.ingestors=org.apache.nifi.minifi.bootstrap.configuration.ingestors.PullHttpChangeIngestor</span><br></pre></td></tr></table></figure>
<p>Ingestor specific configuration is also necessary and done in the bootstrap.conf as well. Specifics for each are detailed below.</p>
<h2 id="FileChangeIngestor"><a href="#FileChangeIngestor" class="headerlink" title="FileChangeIngestor"></a>FileChangeIngestor</h2><p>class name: org.apache.nifi.minifi.bootstrap.configuration.ingestors.FileChangeIngestor</p>
<p>This Config Change Ingestor watches a file and when the file is updated, the file is ingested as a new config.</p>
<p>Note: The config file path configured here and in “nifi.minifi.config” cannot be the same. This is due to the swapping mechanism and other implementation limitations.</p>
<p>Below are the configuration options. The file config path is the only required property.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>nifi.minifi.notifier.ingestors.file.config.path</td>
<td>Path of the file to monitor for changes.  When these occur, the FileChangeNotifier, if configured, will begin the configuration reloading process</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.file.polling.period.seconds</td>
<td>How frequently the file specified by ‘nifi.minifi.notifier.file.config.path’ should be evaluated for changes. If not set then a default polling period of 15 seconds will be used.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.file.differentiator</td>
<td>Which differentiator to use. If not set then it uses the WholeConfigDifferentiator as a default.</td>
</tr>
</tbody>
</table>
<h2 id="RestChangeIngestor"><a href="#RestChangeIngestor" class="headerlink" title="RestChangeIngestor"></a>RestChangeIngestor</h2><p>class name: org.apache.nifi.minifi.bootstrap.configuration.ingestors.RestChangeIngestor</p>
<p>This Config Change Ingestor sets up a light-weight Jetty HTTP(S) REST service in order to listen to HTTP(S) requests. A potential new configuration is sent via a POST request with the BODY being the potential new config.</p>
<p><strong>Note:</strong> The encoding is expected to be Unicode and the exact version specified by the BOM mark (‘UTF-8’,’UTF-16BE’ or ‘UTF-16LE’). If there is no BOM mark, then UTF-8 is used.</p>
<p>Here is an example post request using ‘curl’ hitting the local machine on pot 8338 and it is executed with the config file “config.yml” in the directory the command is run from:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --request POST --data-binary &quot;@config.yml&quot; http://localhost:8338/</span><br></pre></td></tr></table></figure>
<p>Below are the configuration options. There are no required options. If no properties are set then the server will bind to hostname “localhost” on a random open port, will only connect via HTTP and will use the WholeConfigDifferentiator.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>nifi.minifi.notifier.ingestors.receive.http.host</td>
<td>Hostname on which the Jetty server will bind to. If not specified then it will bind to localhost.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.receive.http.port</td>
<td>Port on which the Jetty server will bind to. If not specified then it will bind to a random open port.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.receive.http.truststore.location</td>
<td>If using HTTPS, this specifies the location of the truststore.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.receive.http.truststore.password</td>
<td>If using HTTPS, this specifies the password of the truststore.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.receive.http.truststore.type</td>
<td>If using HTTPS, this specifies the type of the truststore.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.receive.http.keystore.location</td>
<td>If using HTTPS, this specifies the location of the keystore.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.receive.http.keystore.password</td>
<td>If using HTTPS, this specifies the password of the keystore.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.receive.http.keystore.type</td>
<td>If using HTTPS, this specifies the type of the keystore.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.receive.http.need.client.auth</td>
<td>If using HTTPS, this specifies whether or not to require client authentication.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.receive.http.differentiator</td>
<td>Which differentiator to use. If not set then it uses the WholeConfigDifferentiator as a default.</td>
</tr>
</tbody>
</table>
<h2 id="PullHttpChangeIngestor"><a href="#PullHttpChangeIngestor" class="headerlink" title="PullHttpChangeIngestor"></a>PullHttpChangeIngestor</h2><p>class name: org.apache.nifi.minifi.bootstrap.configuration.ingestors.PullHttpChangeIngestor</p>
<p>This Config Change Ingestor periodically sends a GET request to a REST endpoint using HTTP(S) to order to pull the potential new config.</p>
<p>Below are the configuration options. The hostname and port are the only required properties.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.hostname</td>
<td>Hostname on which to pull configurations from</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.port</td>
<td>Port on which to pull configurations from</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.proxy.hostname</td>
<td>Proxy server hostname</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.proxy.port</td>
<td>Proxy server port</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.proxy.username</td>
<td>Proxy username</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.proxy.password</td>
<td>Proxy password</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.path</td>
<td>Path on which to pull configurations from</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.period.ms</td>
<td>Period on which to pull configurations from, defaults to 5 minutes if not set.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.use.etag</td>
<td>If the destination server is set up with cache control ability and utilizes an “ETag” header, then this should be set to true to utilize it. Very simply, the Ingestor remembers the “ETag” of the last successful pull (returned 200) then uses that “ETag” in a “If-None-Match” header on the next request.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.connect.timeout.ms</td>
<td>Sets the connect timeout for new connections. A value of 0 means no timeout, otherwise values must be a positive whole number in milliseconds.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.read.timeout.ms</td>
<td>Sets the read timeout for new connections. A value of 0 means no timeout, otherwise values must be a positive whole number in milliseconds.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.truststore.location</td>
<td>If using HTTPS, this specifies the location of the truststore.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.truststore.password</td>
<td>If using HTTPS, this specifies the password of the truststore.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.truststore.type</td>
<td>If using HTTPS, this specifies the type of the truststore.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.keystore.location</td>
<td>If using HTTPS, this specifies the location of the keystore.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.keystore.password</td>
<td>If using HTTPS, this specifies the password of the keystore.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.keystore.type</td>
<td>If using HTTPS, this specifies the type of the keystore.</td>
</tr>
<tr>
<td>nifi.minifi.notifier.ingestors.pull.http.differentiator</td>
<td>Which differentiator to use. If not set then it uses the WholeConfigDifferentiator as a default.</td>
</tr>
</tbody>
</table>
<h1 id="Status-Reporting-and-Querying"><a href="#Status-Reporting-and-Querying" class="headerlink" title="Status Reporting and Querying"></a>Status Reporting and Querying</h1><p>In NiFi there is a lot of information, such as stats and bulletins, that is only available to view through the UI. MiNiFi provides access to this information through a query mechanism. You can query FlowStatus either using the MiNiFi.sh script or by configuring one of the Periodic Status Reporters. The API for the query is the same for the reporters and the “flowStatus” script option. The API is outlined in the “FlowStatus Query Options” section below.</p>
<h2 id="FlowStatus-Script-Query"><a href="#FlowStatus-Script-Query" class="headerlink" title="FlowStatus Script Query"></a>FlowStatus Script Query</h2><p>From the minifi.sh script, you can manually query to get the current status of your  dataflow. The following is an example of a minifi.sh query you might run to view health, stats, and bulletins for the TailFile processor. This query returns information to your command-line.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minifi.sh flowStatus processor:TailFile:health,stats,bulletins</span><br></pre></td></tr></table></figure>
<p>Currently the script only accepts one high level option at a time. Also any names of connections, remote process groups, or processors that contain “ “ (a space), “:”, “;” or “,” cause parsing errors when querying.</p>
<h2 id="Periodic-Status-Reporters"><a href="#Periodic-Status-Reporters" class="headerlink" title="Periodic Status Reporters"></a>Periodic Status Reporters</h2><p>You can set up Periodic Status Reporters to periodically report the status of your dataflow. The query executes at configurable intervals and the results are reported using the configured implementation. Configure the Reporters in the bootstrap.conf file, using the “nifi.minifi.status.reporter.components” key followed by the full path name of the desired Reporter implementation to run. Use a comma separated list  to define more than one Reporter implementation. For example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nifi.minifi.status.reporter.components=org.apache.nifi.minifi.bootstrap.status.reporters.StatusLogger</span><br></pre></td></tr></table></figure>
<h3 id="StatusLogger"><a href="#StatusLogger" class="headerlink" title="StatusLogger"></a>StatusLogger</h3><p>class name: org.apache.nifi.minifi.bootstrap.status.reporters.StatusLogger</p>
<p>The Periodic Status Reporter logs the results of the query to the logs. By default it is logged to the minifi-bootstrap.log but you can modify logback.xml to log to an alternate file and location.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>nifi.minifi.status.reporter.log.query</td>
<td>The FlowStatus query to run.</td>
</tr>
<tr>
<td>nifi.minifi.status.reporter.log.level</td>
<td>The log level at which to log the status. Available options are “TRACE”, “DEBUG”, “INFO”, “WARN” and “ERROR”.</td>
</tr>
<tr>
<td>nifi.minifi.status.reporter.log.period</td>
<td>The delay (in milliseconds) between each query.</td>
</tr>
</tbody>
</table>
<p>Example bootstrap.conf configuration:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># The FlowStatus query to submit to the MiNiFi instance</span><br><span class="line">nifi.minifi.status.reporter.log.query=instance:health,bulletins</span><br><span class="line"># The log level at which the status will be logged</span><br><span class="line">nifi.minifi.status.reporter.log.level=INFO</span><br><span class="line"># The period (in milliseconds) at which to log the status</span><br><span class="line">nifi.minifi.status.reporter.log.period=60000</span><br></pre></td></tr></table></figure>
<p>Example logback.xml configuration to output the status to its own rolling log file:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;appender name=&quot;STATUS_LOG_FILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;</span><br><span class="line">    &lt;file&gt;logs/minifi-status.log&lt;/file&gt;</span><br><span class="line">    &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;</span><br><span class="line">        &lt;!--</span><br><span class="line">          For daily rollover, use &apos;user_%d.log&apos;.</span><br><span class="line">          For hourly rollover, use &apos;user_%d&#123;yyyy-MM-dd_HH&#125;.log&apos;.</span><br><span class="line">          To GZIP rolled files, replace &apos;.log&apos; with &apos;.log.gz&apos;.</span><br><span class="line">          To ZIP rolled files, replace &apos;.log&apos; with &apos;.log.zip&apos;.</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;fileNamePattern&gt;./logs/minifi-status_%d.log&lt;/fileNamePattern&gt;</span><br><span class="line">        &lt;!-- keep 5 log files worth of history --&gt;</span><br><span class="line">        &lt;maxHistory&gt;5&lt;/maxHistory&gt;</span><br><span class="line">    &lt;/rollingPolicy&gt;</span><br><span class="line">    &lt;encoder class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt;</span><br><span class="line">        &lt;pattern&gt;%date %level [%thread] %logger&#123;40&#125; %msg%n&lt;/pattern&gt;</span><br><span class="line">    &lt;/encoder&gt;</span><br><span class="line">&lt;/appender&gt;</span><br><span class="line"></span><br><span class="line">&lt;logger name=&quot;org.apache.nifi.minifi.bootstrap.status.reporters.StatusLogger&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;</span><br><span class="line">    &lt;appender-ref ref=&quot;STATUS_LOG_FILE&quot; /&gt;</span><br><span class="line">&lt;/logger&gt;</span><br></pre></td></tr></table></figure>
<h2 id="FlowStatus-Query-Options"><a href="#FlowStatus-Query-Options" class="headerlink" title="FlowStatus Query Options"></a>FlowStatus Query Options</h2><p>This section outlines each option to query the MiNiFi instance for the FlowStatus.</p>
<h3 id="Processors"><a href="#Processors" class="headerlink" title="Processors"></a>Processors</h3><p>To query the processors use the “processor” flag followed by the processor ID to get (or “all”) followed by one of the processor options. The processor options are below.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>health</td>
<td>The processor’s run status, whether or not it has bulletins and the validation errors (if there are any).</td>
</tr>
<tr>
<td>bulletins</td>
<td>A list of all the current bulletins (if there are any).</td>
</tr>
<tr>
<td>stats</td>
<td>The current stats of the processor. This includes but is not limited to active threads and FlowFiles sent/received.</td>
</tr>
</tbody>
</table>
<p>An example query to get the health, bulletins and stats of the “TailFile” processor is below.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minifi.sh flowStatus processor:TailFile:health,stats,bulletins</span><br></pre></td></tr></table></figure></p>
<h3 id="Connections"><a href="#Connections" class="headerlink" title="Connections"></a>Connections</h3><p>To query the connections use the “connection” flag followed by the connection ID to get (or “all”) followed by one of the connection options. The connection options are below.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>health</td>
<td>The connections’s queued bytes and queued FlowFile count.</td>
</tr>
<tr>
<td>stats</td>
<td>The current stats of the connection. This includes input/output count and input/output bytes.</td>
</tr>
</tbody>
</table>
<p>An example query to get the health and stats of the “TailToS2S” connection is below.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minifi.sh flowStatus connection:TailToS2S:health,stats</span><br></pre></td></tr></table></figure></p>
<h3 id="Remote-Process-Groups"><a href="#Remote-Process-Groups" class="headerlink" title="Remote Process Groups"></a>Remote Process Groups</h3><p>To query the remote process groups (RPG) use the “remoteProcessGroup” flag followed by the RPG ID to get (or “all”) followed by one of the remote process group options. The remote process group options are below.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>health</td>
<td>The connections’s queued bytes and queued FlowFile count.</td>
</tr>
<tr>
<td>bulletins</td>
<td>A list of all the current bulletins (if there are any).</td>
</tr>
<tr>
<td>inputPorts</td>
<td>A list of every input port for this RPG and their status. Their status includes its name, whether the target exists and whether it’s currently running.</td>
</tr>
<tr>
<td>outputPorts</td>
<td>A list of every output port for this RPG and their status. Their status includes its name, whether the target exists and whether it’s currently running.</td>
</tr>
<tr>
<td>stats</td>
<td>The current stats of the RPG. This includes the active threads, sent content size and count.</td>
</tr>
</tbody>
</table>
<p>An example query to get the health, bulletins, input ports and stats of all the RPGS is below.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minifi.sh flowStatus remoteprocessgroup:all:health,bulletins,inputports,stats</span><br></pre></td></tr></table></figure>
<h3 id="Controller-Services"><a href="#Controller-Services" class="headerlink" title="Controller Services"></a>Controller Services</h3><p>To query the controller services use the “controllerServices” flag followed by one of the controller service options. The controller service options are below.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>health</td>
<td>The controller service’s state, whether or not it has bulletins and any validation errors.</td>
</tr>
<tr>
<td>bulletins</td>
<td>A list of all the current bulletins (if there are any).</td>
</tr>
</tbody>
</table>
<p>An example query to get the health and bulletins of all the controller services is below.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minifi.sh flowStatus controllerservices:health,bulletins</span><br></pre></td></tr></table></figure>
<h3 id="Provenance-Reporting"><a href="#Provenance-Reporting" class="headerlink" title="Provenance Reporting"></a>Provenance Reporting</h3><p>To query the status of the provenance reporting use the “provenancereporting” flag followed by one of the provenance reporting  options. The provenance reporting options are below.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>health</td>
<td>The provenance reporting state, active threads, whether or not it has bulletins and any validation errors.</td>
</tr>
<tr>
<td>bulletins</td>
<td>A list of all the current bulletins (if there are any).</td>
</tr>
</tbody>
</table>
<p>An example query to get the health and bulletins of the provenance reporting is below.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minifi.sh flowStatus provenancereporting:health,bulletins</span><br></pre></td></tr></table></figure>
<h3 id="Instance"><a href="#Instance" class="headerlink" title="Instance"></a>Instance</h3><p>To query the status of the MiNiFi instance use the “instance” flag followed by one of the instance options. The instance options are below.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>health</td>
<td>The provenance reporting state, active threads, whether or not it has bulletins and any validation errors.</td>
</tr>
<tr>
<td>bulletins</td>
<td>A list of all the current bulletins (if there are any).</td>
</tr>
<tr>
<td>stats</td>
<td>The current stats of the instance. This including but not limited to bytes read/written and FlowFiles sent/transferred.</td>
</tr>
</tbody>
</table>
<p>An example query to get the health, stats and bulletins of the instance is below.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minifi.sh flowStatus instance:health,stats,bulletins</span><br></pre></td></tr></table></figure>
<h3 id="System-Diagnostics"><a href="#System-Diagnostics" class="headerlink" title="System Diagnostics"></a>System Diagnostics</h3><p>To query the system diagnostics use the “systemdiagnostics” flag followed by one of the system diagnostics options. The system diagnostics options are below.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>heap</td>
<td>Information detailing the state of the JVM heap.</td>
</tr>
<tr>
<td>processorstats</td>
<td>The system processor stats. This includes the available processors and load average.</td>
</tr>
<tr>
<td>contentrepositoryusage</td>
<td>A list of each content repository and stats detailing its usage.</td>
</tr>
<tr>
<td>flowfilerepositoryusage</td>
<td>Stats about the current usage of the FlowFile repository.</td>
</tr>
<tr>
<td>garbagecollection</td>
<td>A list of the garbage collection events, detailing their name, collection count and time.</td>
</tr>
</tbody>
</table>
<p>An example query to get the heap, processor stats, content repository usage, FlowFile repository usage and garbage collection from the system diagnostics is below.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minifi.sh flowStatus systemdiagnostics:heap,processorstats,contentrepositoryusage,flowfilerepositoryusage,garbagecollection</span><br></pre></td></tr></table></figure>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p>This is an example of a simple query to get the health of all the processors and its results from a simple flow:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">User:minifi-0.0.1-SNAPSHOT user ./bin/minifi.sh flowStatus processor:all:health</span><br><span class="line"></span><br><span class="line">Java home: /Library/Java/JavaVirtualMachines/jdk1.8.0_74.jdk/Contents/Home</span><br><span class="line">MiNiFi home: /Users/user/projects/nifi-minifi/minifi-assembly/target/minifi-0.0.1-SNAPSHOT-bin/minifi-0.0.1-SNAPSHOT</span><br><span class="line"></span><br><span class="line">Bootstrap Config File: /Users/user/projects/nifi-minifi/minifi-assembly/target/minifi-0.0.1-SNAPSHOT-bin/minifi-0.0.1-SNAPSHOT/conf/bootstrap.conf</span><br><span class="line"></span><br><span class="line">&#123;&quot;controllerServiceStatusList&quot;:null,&quot;processorStatusList&quot;:[&#123;&quot;name&quot;:&quot;Connection Diagnostics&quot;,&quot;processorHealth&quot;:&#123;&quot;runStatus&quot;:&quot;Running&quot;,&quot;hasBulletins&quot;:false,&quot;validationErrorList&quot;:[]&#125;,&quot;processorStats&quot;:null,&quot;bulletinList&quot;:null&#125;,&#123;&quot;name&quot;:&quot;UpdateAttribute&quot;,&quot;processorHealth&quot;:&#123;&quot;runStatus&quot;:&quot;Running&quot;,&quot;hasBulletins&quot;:false,&quot;validationErrorList&quot;:[]&#125;,&quot;processorStats&quot;:null,&quot;bulletinList&quot;:null&#125;,&#123;&quot;name&quot;:&quot;Processor Diagnostics&quot;,&quot;processorHealth&quot;:&#123;&quot;runStatus&quot;:&quot;Running&quot;,&quot;hasBulletins&quot;:false,&quot;validationErrorList&quot;:[]&#125;,&quot;processorStats&quot;:null,&quot;bulletinList&quot;:null&#125;,&#123;&quot;name&quot;:&quot;System Diagnostics&quot;,&quot;processorHealth&quot;:&#123;&quot;runStatus&quot;:&quot;Running&quot;,&quot;hasBulletins&quot;:false,&quot;validationErrorList&quot;:[]&#125;,&quot;processorStats&quot;:null,&quot;bulletinList&quot;:null&#125;,&#123;&quot;name&quot;:&quot;GenerateFlowFile&quot;,&quot;processorHealth&quot;:&#123;&quot;runStatus&quot;:&quot;Running&quot;,&quot;hasBulletins&quot;:false,&quot;validationErrorList&quot;:[]&#125;,&quot;processorStats&quot;:null,&quot;bulletinList&quot;:null&#125;],&quot;connectionStatusList&quot;:null,&quot;remoteProcessGroupStatusList&quot;:null,&quot;instanceStatus&quot;:null,&quot;systemDiagnosticsStatus&quot;:null,&quot;reportingTaskStatusList&quot;:null,&quot;errorsGeneratingReport&quot;:[]&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Periodic-Status-Reporters-1"><a href="#Periodic-Status-Reporters-1" class="headerlink" title="Periodic Status Reporters"></a>Periodic Status Reporters</h1><h1 id="Config-File"><a href="#Config-File" class="headerlink" title="Config File"></a>Config File</h1><p>The config.yml in the <em>conf</em> directory is the main configuration file for controlling how MiNiFi runs. This section provides an overview of the properties in this file. The file is a YAML<br>and follows the YAML format laid out <a href="http://www.yaml.org/" target="_blank" rel="noopener">here</a>.</p>
<p>Alternatively, the MiNiFi Toolkit Converter can aid in creating a config.yml from a generated template exported from a NiFi instance.  This<br>tool can be downloaded from <a href="https://nifi.apache.org/minifi/download.html" target="_blank" rel="noopener">https://nifi.apache.org/minifi/download.html</a> under the <code>MiNiFi Toolkit Binaries</code> section.  Information on the toolkit’s usage is<br>available at <a href="https://nifi.apache.org/minifi/minifi-toolkit.html" target="_blank" rel="noopener">https://nifi.apache.org/minifi/minifi-toolkit.html</a>.</p>
<p><strong>Note:</strong> Values for periods of time and data sizes must include the unit of measure,<br>for example “10 sec” or “10 MB”, not simply “10”.</p>
<h2 id="Versioning"><a href="#Versioning" class="headerlink" title="Versioning"></a>Versioning</h2><p>The “MiNiFi Config Version” property is used to indicate to the configuration parser which version of the config file it is looking at.  If the property is empty or missing, version 1 is assumed.</p>
<p>The MiNiFi Toolkit Converter is capable of parsing previous versions (possibly subject to a future deprecation policy) and writing out the current version.  It can also validate that a given config file<br>parses and upconverts to the current version without issue.</p>
<h3 id="Version-1-gt-Version-2-changes"><a href="#Version-1-gt-Version-2-changes" class="headerlink" title="Version 1 -&gt; Version 2 changes"></a>Version 1 -&gt; Version 2 changes</h3><ol>
<li>Use ids instead of names for processors, connections.</li>
<li>Allow multiple source relationships for connections.</li>
<li>Added support for process groups, and internal input ports an output ports.</li>
<li>Change Id Key for RPGs from “Remote Processing Groups” to the proper “Remote Process Groups” (not “ing”).</li>
</ol>
<h3 id="Version-2-gt-Version-3-changes"><a href="#Version-2-gt-Version-3-changes" class="headerlink" title="Version 2 -&gt; Version 3 changes"></a>Version 2 -&gt; Version 3 changes</h3><ol>
<li>Added support for Controller Services.</li>
<li>Added support for Site-To-Site over proxy.</li>
<li>Added support for overriding nifi.properties values</li>
<li>Added support for Output Ports to Remote Process Groups</li>
</ol>
<h2 id="Flow-Controller"><a href="#Flow-Controller" class="headerlink" title="Flow Controller"></a>Flow Controller</h2><p>The first section of config.yml is for naming and commenting on the file.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>MiNiFi Config Version</td>
<td>The version of the configuration file.  The default value if this property is missing or empty is 1, the current value is 2.</td>
</tr>
<tr>
<td>name</td>
<td>The name of the file.</td>
</tr>
<tr>
<td>comment</td>
<td>A comment describing the usage of this config file.</td>
</tr>
</tbody>
</table>
<h2 id="Core-Properties"><a href="#Core-Properties" class="headerlink" title="Core Properties"></a>Core Properties</h2><p>The Core Properties section applies to the core framework as a whole.</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>flow controller graceful shutdown period</td>
<td>Indicates the shutdown period. The default value is 10 sec.</td>
</tr>
<tr>
<td>flow service write delay interval</td>
<td>When many changes are made to the flow.xml, this property specifies how long to wait before writing out the changes, so as to batch the changes into a single write. The default value is 500 ms.</td>
</tr>
<tr>
<td>administrative yield duration</td>
<td>If a component allows an unexpected exception to escape, it is considered a bug. As a result, the framework will pause (or administratively yield) the component for this amount of time. This is done so that the component does not use up massive amounts of system resources, since it is known to have problems in the existing state. The default value is 30 sec.</td>
</tr>
<tr>
<td>bored yield duration</td>
<td>When a component has no work to do (i.e., is “bored”), this is the amount of time it will wait before checking to see if it has new data to work on. This way, it does not use up CPU resources by checking for new work too often. When setting this property, be aware that it could add extra latency for components that do not constantly have work to do, as once they go into this “bored” state, they will wait this amount of time before checking for more work. The default value is 10 millis.</td>
</tr>
<tr>
<td>max concurrent threads</td>
<td>The maximum number of threads any processor can have running at one time.</td>
</tr>
</tbody>
</table>
<h2 id="FlowFile-Repository"><a href="#FlowFile-Repository" class="headerlink" title="FlowFile Repository"></a>FlowFile Repository</h2><p>The FlowFile repository keeps track of the attributes and current state of each FlowFile in the system. By default,<br>this repository is installed in the same root installation directory as all the other repositories; however, it is advisable<br>to configure it on a separate drive if available.</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>partitions</td>
<td>The number of partitions. The default value is 256.</td>
</tr>
<tr>
<td>checkpoint interval</td>
<td>The FlowFile Repository checkpoint interval. The default value is 2 mins.</td>
</tr>
<tr>
<td>always sync</td>
<td>If set to <em>true</em>, any change to the repository will be synchronized to the disk, meaning that NiFi will ask the operating system not to cache the information. This is very expensive and can significantly reduce NiFi performance. However, if it is <em>false</em>, there could be the potential for data loss if either there is a sudden power loss or the operating system crashes. The default value is <em>false</em>.</td>
</tr>
</tbody>
</table>
<h4 id="Swap-Subsection"><a href="#Swap-Subsection" class="headerlink" title="Swap Subsection"></a>Swap Subsection</h4><p>A part of the FlowFile Repository section there is a Swap subsection.</p>
<p>NiFi keeps FlowFile information in memory (the JVM)<br>but during surges of incoming data, the FlowFile information can start to take up so much of the JVM that system performance<br>suffers. To counteract this effect, NiFi “swaps” the FlowFile information to disk temporarily until more JVM space becomes<br>available again. The “Swap” subsection of properties govern how that process occurs.</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>threshold</td>
<td>The queue threshold at which NiFi starts to swap FlowFile information to disk. The default value is 20000.</td>
</tr>
<tr>
<td>in period</td>
<td>The swap in period. The default value is 5 sec.</td>
</tr>
<tr>
<td>in threads</td>
<td>The number of threads to use for swapping in. The default value is 1.</td>
</tr>
<tr>
<td>out period</td>
<td>The swap out period. The default value is 5 sec.</td>
</tr>
<tr>
<td>out threads</td>
<td>The number of threads to use for swapping out. The default value is 4.</td>
</tr>
</tbody>
</table>
<h2 id="Content-Repository"><a href="#Content-Repository" class="headerlink" title="Content Repository"></a>Content Repository</h2><p>The Content Repository holds the content for all the FlowFiles in the system. By default, it is installed in the same root<br>installation directory as all the other repositories; however, administrators will likely want to configure it on a separate<br>drive if available. If nothing else, it is best if the Content Repository is not on the same drive as the FlowFile Repository.<br>In dataflows that handle a large amount of data, the Content Repository could fill up a disk and the<br>FlowFile Repository, if also on that disk, could become corrupt. To avoid this situation, configure these repositories on different drives.</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>content claim max appendable size</td>
<td>The maximum size for a content claim. The default value is 10 MB.</td>
</tr>
<tr>
<td>content claim max flow files</td>
<td>The maximum number of FlowFiles to assign to one content claim. The default value is 100.</td>
</tr>
<tr>
<td>always sync</td>
<td>If set to <em>true</em>, any change to the repository will be synchronized to the disk, meaning that NiFi will ask the operating system not to cache the information. This is very expensive and can significantly reduce NiFi performance. However, if it is <em>false</em>, there could be the potential for data loss if either there is a sudden power loss or the operating system crashes. The default value is <em>false</em>.</td>
</tr>
</tbody>
</table>
<h2 id="Provenance-Repository"><a href="#Provenance-Repository" class="headerlink" title="Provenance Repository"></a>Provenance Repository</h2><table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>provenance rollover time</td>
<td>The amount of time to wait before rolling over the latest data provenance information so that it is available to be accessed by components. The default value is 1 min.</td>
</tr>
</tbody>
</table>
<h2 id="Component-Status-Repository"><a href="#Component-Status-Repository" class="headerlink" title="Component Status Repository"></a>Component Status Repository</h2><p>The Component Status Repository contains the information for the Component Status History tool in the User Interface. These<br>properties govern how that tool works.</p>
<p>The buffer.size and snapshot.frequency work together to determine the amount of historical data to retain. As an example to<br>configure two days worth of historical data with a data point snapshot occurring every 5 minutes you would configure<br>snapshot.frequency to be “5 mins” and the buffer.size to be “576”. To further explain this example for every 60 minutes there<br>are 12 (60 / 5) snapshot windows for that time period. To keep that data for 48 hours (12 * 48) you end up with a buffer size<br>of 576.</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>buffer size</td>
<td>Specifies the buffer size for the Component Status Repository. The default value is 1440.</td>
</tr>
<tr>
<td>snapshot frequency</td>
<td>This value indicates how often to present a snapshot of the components’ status history. The default value is 1 min.</td>
</tr>
</tbody>
</table>
<h2 id="Security-Properties"><a href="#Security-Properties" class="headerlink" title="Security Properties"></a>Security Properties</h2><p>These properties pertain to various security features in NiFi. Many of these properties are covered in more detail in the<br>Security Configuration section of this Administrator’s Guide.</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>keystore</td>
<td>The full path and name of the keystore. It is blank by default.</td>
</tr>
<tr>
<td>keystore type</td>
<td>The keystore type. It is blank by default.</td>
</tr>
<tr>
<td>keystore password</td>
<td>The keystore password. It is blank by default.</td>
</tr>
<tr>
<td>key password</td>
<td>The key password. It is blank by default.</td>
</tr>
<tr>
<td>truststore</td>
<td>The full path and name of the truststore. It is blank by default.</td>
</tr>
<tr>
<td>truststore type</td>
<td>The truststore type. It is blank by default.</td>
</tr>
<tr>
<td>truststore password</td>
<td>The truststore password. It is blank by default.</td>
</tr>
<tr>
<td>ssl protocol</td>
<td>The protocol to use when communicating via https. Necessary to transfer provenance securely.</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> A StandardSSLContextService will be made automatically with the ID “SSL-Context-Service” if “ssl protocol” is configured.</p>
<h4 id="Sensitive-Properties-Subsection"><a href="#Sensitive-Properties-Subsection" class="headerlink" title="Sensitive Properties Subsection"></a>Sensitive Properties Subsection</h4><p>Some properties for processors are marked as <em>sensitive</em> and should be encrypted. These following properties will be used to encrypt the properties while in use by MiNiFi. This will currently <em>not</em> be used to encrypt properties in the config file.</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>key</td>
<td>This is the password used to encrypt any sensitive property values that are configured in processors. By default, it is blank, but the system administrator should provide a value for it. It can be a string of any length, although the recommended minimum length is 10 characters. Be aware that once this password is set and one or more sensitive processor properties have been configured, this password should not be changed.</td>
</tr>
<tr>
<td>algorithm</td>
<td>The algorithm used to encrypt sensitive properties. The default value is <code>PBEWITHMD5AND256BITAES-CBC-OPENSSL</code>.</td>
</tr>
<tr>
<td>provider</td>
<td>The sensitive property provider. The default value is BC.</td>
</tr>
</tbody>
</table>
<h2 id="Processors-1"><a href="#Processors-1" class="headerlink" title="Processors"></a>Processors</h2><p>The current implementation of MiNiFi supports multiple processors. The “Processors” subsection is a list of these processors. Each processor must specify these properties. They are the basic configuration general to all processor implementations. Make sure that all relationships for a processor are accounted for in the auto-terminated relationship list or are used in a connection.</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>The name of what this processor will do. This is not used for any underlying implementation but solely for the users of this configuration and MiNiFi agent.</td>
</tr>
<tr>
<td>id</td>
<td>The id of this processor.  This can be omitted but in processors without this field, there should not be any duplicate names and connections will need to specify source and destination name instead of id.  If set it should be a filesystem-friendly value (regex: [A-Za-z0-9_-]+)</td>
</tr>
<tr>
<td>class</td>
<td>The fully qualified java class name of the processor to run. For example for the standard TailFile processor it would be: org.apache.nifi.processors.standard.TailFile</td>
</tr>
<tr>
<td>max concurrent tasks</td>
<td>The maximum number of tasks that the processor will use.</td>
</tr>
<tr>
<td>scheduling strategy</td>
<td>The strategy for executing the processor. Valid options are <code>CRON_DRIVEN</code> or <code>TIMER_DRIVEN</code></td>
</tr>
<tr>
<td>scheduling period</td>
<td>This property expects different input depending on the scheduling strategy selected. For the <code>TIMER_DRIVEN</code> scheduling strategy, this value is a time duration specified by a number followed by a time unit. For example, 1 second or 5 mins. The default value of 0 sec means that the Processor should run as often as possible as long as it has data to process. This is true for any time duration of 0, regardless of the time unit (i.e., 0 sec, 0 mins, 0 days). For an explanation of values that are applicable for the CRON driven scheduling strategy, see the description of the CRON driven scheduling strategy in the scheduling tab section of the <a href="https://nifi.apache.org/docs/nifi-docs/html/user-guide.html#scheduling-tab" target="_blank" rel="noopener">NiFi User documentation</a>.</td>
</tr>
<tr>
<td>penalization period</td>
<td>Specifies how long FlowFiles will be penalized.</td>
</tr>
<tr>
<td>yield period</td>
<td>In the event the processor cannot make progress it should <code>yield</code> which will prevent the processor from being scheduled to run for some period of time. That period of time is specific using this property.</td>
</tr>
<tr>
<td>run duration nanos</td>
<td>If the processor supports batching this property can be used to control how long the Processor should be scheduled to run each time that it is triggered. Smaller values will have lower latency but larger values will have higher throughput. This period should typically only be set between 0 and 2000000000 (2 seconds).</td>
</tr>
<tr>
<td>auto-terminated relationships list</td>
<td>A YAML list of the relationships to auto-terminate for the processor.</td>
</tr>
<tr>
<td>annotation data</td>
<td>Some processors make use of “Annotation Data” in order to do more complex configuration, such as the Advanced portion of UpdateAttribute. This data will be unique to each implementing processor and more than likely will not be written out manually.</td>
</tr>
</tbody>
</table>
<h4 id="Processor-Properties"><a href="#Processor-Properties" class="headerlink" title="Processor Properties"></a>Processor Properties</h4><p>Within the Processor Configuration section, there is the <code>Properties</code> subsection. The keys and values in this section are the property names and values for the processor. For example the TailFile processor would have a section like this:</p>
<pre><code>Properties:
    File to Tail: logs/nifi-app.log
    Rolling Filename Pattern: nifi-app*
    State File: ./conf/state/tail-file
    Initial Start Position: Beginning of File
</code></pre><h3 id="Controller-Services-1"><a href="#Controller-Services-1" class="headerlink" title="Controller Services"></a>Controller Services</h3><p>The current implementation of MiNiFi supports Controller Services. The “Controller Services” subsection is a list of these services. Each Controller Service must specify the following properties. They are the basic configuration general to all Controller Service implementations.</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>The name of what this Controller Service will do. This is not used for any underlying implementation but solely for the users of this configuration and MiNiFi agent.</td>
</tr>
<tr>
<td>id</td>
<td>The id of this Controller Service. This must be a valid UUID. To reference this Controller Service in the properties of another component, this ID is used.</td>
</tr>
<tr>
<td>type</td>
<td>The fully qualified java class name of the processor to run. For example for the standard StandardSSLContextService processor would be: org.apache.nifi.ssl.StandardSSLContextService</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> If the “Security Properties” is configured with an “ssl protocol” then a StandardSSLContextService will be made automatically with the ID “SSL-Context-Service”.</p>
<h4 id="Controller-Service-Properties"><a href="#Controller-Service-Properties" class="headerlink" title="Controller Service Properties"></a>Controller Service Properties</h4><p>Within the Controller Service Configuration section, there is the <code>Properties</code> subsection. The keys and values in this section are the property names and values for the service. For example the StandardSSLContextService would have a section like this:</p>
<pre><code>Properties:
  Keystore Filename: /tmp/localhost/keystore.jks
  Keystore Password: keystorePassword
  Keystore Type: JKS
  SSL Protocol: TLS
  Truststore Filename: /tmp/truststore.jks
  Truststore Password: truststorePassword
  Truststore Type: JKS
  key-password: keyPassword
</code></pre><h2 id="Process-Groups"><a href="#Process-Groups" class="headerlink" title="Process Groups"></a>Process Groups</h2><p>Process groups can be nested from the top level.  They can contain other process groups as well and can be used to logically group related operations.</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>The name of what this process group will do.</td>
</tr>
<tr>
<td>id</td>
<td>The id of this process group.  This needs to be set to a unique filesystem-friendly value (regex: [A-Za-z0-9_-]+)</td>
</tr>
<tr>
<td>Processors</td>
<td>The processors contained in this Process Group. (Defined above)</td>
</tr>
<tr>
<td>Remote Process Groups</td>
<td>The remote process groups contained in this Process Group. (Defined below)</td>
</tr>
<tr>
<td>Connections</td>
<td>The connections contained in this Process Group. (Defined below)</td>
</tr>
<tr>
<td>Input Ports</td>
<td>The input ports contained in this Process Group. (Defined below)</td>
</tr>
<tr>
<td>Output Ports</td>
<td>The output ports contained in this Process Group. (Defined below)</td>
</tr>
<tr>
<td>Funnels</td>
<td>The funnels contained in this Process Group. (Defined below)</td>
</tr>
<tr>
<td>Process Groups</td>
<td>The child Process Groups contained in this Process Group.</td>
</tr>
</tbody>
</table>
<h2 id="Input-Ports"><a href="#Input-Ports" class="headerlink" title="Input Ports"></a>Input Ports</h2><p>These ports provide input to the Process Group they reside on. (Currently only for internal Input ports.)</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>The name of what this input port will do.</td>
</tr>
<tr>
<td>id</td>
<td>The id of this input port.  This needs to be set to a unique filesystem-friendly value (regex: [A-Za-z0-9_-]+)</td>
</tr>
</tbody>
</table>
<h2 id="Output-Ports"><a href="#Output-Ports" class="headerlink" title="Output Ports"></a>Output Ports</h2><p>These ports provide output from the Process Group they reside on. (Currently only for internal Output ports.)</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>The name of what this output port will do.</td>
</tr>
<tr>
<td>id</td>
<td>The id of this output port.  This needs to be set to a unique filesystem-friendly value (regex: [A-Za-z0-9_-]+)</td>
</tr>
</tbody>
</table>
<h2 id="Funnels"><a href="#Funnels" class="headerlink" title="Funnels"></a>Funnels</h2><p>Funnels can be used to combine outputs from multiple processors into a single connection for ease of design.</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>The id of this funnel.  This needs to be set to a unique filesystem-friendly value (regex: [A-Za-z0-9_-]+)</td>
</tr>
</tbody>
</table>
<h2 id="Connections-1"><a href="#Connections-1" class="headerlink" title="Connections"></a>Connections</h2><p>There can be multiple connections in this version of MiNiFi. The “Connections” subsection is a list of connections. Each connection must specify these properties.</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>The name of what this connection will do. This is used for the id of the connection so it must be unique.</td>
</tr>
<tr>
<td>id</td>
<td>The id of this connection.  This needs to be left empty or set to a filesystem-friendly value (regex: [A-Za-z0-9_-]+)</td>
</tr>
<tr>
<td>source name</td>
<td>The name of what of the processor that is the source for this connection.</td>
</tr>
<tr>
<td>source relationship name</td>
<td>The name of the processors relationship to route to this connection</td>
</tr>
<tr>
<td>destination name</td>
<td>The name of the component to receive this connection.</td>
</tr>
<tr>
<td>max work queue size</td>
<td>This property is the max number of FlowFiles that can be in the queue before back pressure is applied. When back pressure is applied the source processor will no longer be scheduled to run.</td>
</tr>
<tr>
<td>max work queue data size</td>
<td>This property specifies the maximum amount of data (in size) that should be queued up before applying back pressure.  When back pressure is applied the source processor will no longer be scheduled to run.</td>
</tr>
<tr>
<td>flowfile expiration</td>
<td>Indicates how long FlowFiles are allowed to exist in the connection before be expired (automatically removed from the flow).</td>
</tr>
<tr>
<td>queue prioritizer class</td>
<td>This configuration option specifies the fully qualified java class path of a queue prioritizer to use. If no special prioritizer is desired then it should be left blank. An example value of this property is: org.apache.nifi.prioritizer.NewestFlowFileFirstPrioritizer</td>
</tr>
</tbody>
</table>
<h2 id="Remote-Process-Groups-1"><a href="#Remote-Process-Groups-1" class="headerlink" title="Remote Process Groups"></a>Remote Process Groups</h2><p>MiNiFi can be used to send data using the Site to Site protocol (via a Remote Process Group) or a Processor. These properties configure the Remote Process Groups that use Site-To-Site to send data to a core instance.  The proxy settings are for HTTP Site-To-Site.</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>The name of what this Remote Process Group points to. This is not used for any underlying implementation but solely for the users of this configuration and MiNiFi agent.</td>
</tr>
<tr>
<td>comment</td>
<td>A comment about the Remote Process Group. This is not used for any underlying implementation but solely for the users of this configuration and MiNiFi agent.</td>
</tr>
<tr>
<td>url</td>
<td>The URL of the core NiFi instance.</td>
</tr>
<tr>
<td>timeout</td>
<td>How long MiNiFi should wait before timing out the connection.</td>
</tr>
<tr>
<td>yield period</td>
<td>When communication with this Remote Process Group fails, it will not be scheduled again for this amount of time.</td>
</tr>
<tr>
<td>transport protocol</td>
<td>The transport protocol to use for this Remote Process Group. Can be either “RAW” or “HTTP”</td>
</tr>
<tr>
<td>proxy host</td>
<td>The hostname of the proxy server</td>
</tr>
<tr>
<td>proxy port</td>
<td>The port to connect to on the proxy server</td>
</tr>
<tr>
<td>proxy user</td>
<td>The user name on the proxy server</td>
</tr>
<tr>
<td>proxy password</td>
<td>The password for the proxy server</td>
</tr>
<tr>
<td>Input Ports</td>
<td>The Input Ports for this Remote Process Group (See below)</td>
</tr>
<tr>
<td>Output Ports</td>
<td>The Output Ports for this Remote Process Group (See below)</td>
</tr>
</tbody>
</table>
<h4 id="Input-Output-Ports-Subsection"><a href="#Input-Output-Ports-Subsection" class="headerlink" title="Input/Output Ports Subsection"></a>Input/Output Ports Subsection</h4><p>When connecting via Site to Site, MiNiFi needs to know which input or output port to communicate to of the core NiFi instance. These properties designate and configure communication with that port.</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>The id of the port as it exists on the core NiFi instance. To get this information access the UI of the core instance, right click the port that is desired to be connect to and select “configure”. The id of the port should under the “Id” section.</td>
</tr>
<tr>
<td>name</td>
<td>The name of the port as it exists on the core NiFi instance. To get this information access the UI of the core instance, right click the port that is desired to be connect to and select “configure”. The name of the port should under the “Port name” section.</td>
</tr>
<tr>
<td>comments:</td>
<td>A comment about the Port. This is not used for any underlying implementation but solely for the users of this configuration and MiNiFi agent.</td>
</tr>
<tr>
<td>max concurrent tasks</td>
<td>The number of tasks that this port should be scheduled for at maximum.</td>
</tr>
<tr>
<td>use compression</td>
<td>Whether or not compression should be used when communicating with the port. This is a boolean value of either “true” or “false”</td>
</tr>
</tbody>
</table>
<h2 id="Provenance-Reporting-1"><a href="#Provenance-Reporting-1" class="headerlink" title="Provenance Reporting"></a>Provenance Reporting</h2><p>MiNiFi is currently designed only to report provenance data using the Site to Site protocol. These properties configure the underlying reporting task that sends the provenance events.</p>
<table>
<thead>
<tr>
<th><em>Property</em></th>
<th><em>Description</em></th>
</tr>
</thead>
<tbody>
<tr>
<td>comment</td>
<td>A comment about the Provenance reporting. This is not used for any underlying implementation but solely for the users of this configuration and MiNiFi agent.</td>
</tr>
<tr>
<td>scheduling strategy</td>
<td>The strategy for executing the Reporting Task. Valid options are <code>CRON_DRIVEN</code> or <code>TIMER_DRIVEN</code></td>
</tr>
<tr>
<td>scheduling period</td>
<td>This property expects different input depending on the scheduling strategy selected. For the <code>TIMER_DRIVEN</code> scheduling strategy, this value is a time duration specified by a number followed by a time unit. For example, 1 second or 5 mins. The default value of 0 sec means that the Processor should run as often as possible as long as it has data to process. This is true for any time duration of 0, regardless of the time unit (i.e., 0 sec, 0 mins, 0 days). For an explanation of values that are applicable for the CRON driven scheduling strategy, see the description of the CRON driven scheduling strategy in the scheduling tab section of the <a href="https://nifi.apache.org/docs/nifi-docs/html/user-guide.html#scheduling-tab" target="_blank" rel="noopener">NiFi User documentation</a>.</td>
</tr>
<tr>
<td>destination url</td>
<td>The URL to post the Provenance Events to.</td>
</tr>
<tr>
<td>port name</td>
<td>The name of the input port as it exists on the receiving NiFi instance. To get this information access the UI of the core instance, right the input port that is desired to be connect to and select “configure”. The id of the port should under the “Port name” section.</td>
</tr>
<tr>
<td>originating url</td>
<td>The URL of this MiNiFi instance. This is used to include the Content URI to send to the destination.</td>
</tr>
<tr>
<td>use compression</td>
<td>Indicates whether or not to compress the events when being sent.</td>
</tr>
<tr>
<td>timeout</td>
<td>How long MiNiFi should wait before timing out the connection.</td>
</tr>
<tr>
<td>batch size</td>
<td>Specifies how many records to send in a single batch, at most. This should be significantly above the expected amount of records generated between scheduling. If it is not, then there is the potential for the Provenance reporting to lag behind event generation and never catch up.</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> In order to send via HTTPS, the “Security Properties” must be fully configured. A StandardSSLContextService will be made automatically with the ID “SSL-Context-Service” and used by the Provenance Reporting.</p>
<h2 id="NiFi-Properties-Overrides"><a href="#NiFi-Properties-Overrides" class="headerlink" title="NiFi Properties Overrides"></a>NiFi Properties Overrides</h2><p>This is a yaml map that contains values to be put into nifi.properties.  This will supercede any hardcoded or other schema values that are substituted into nifi.properties file.</p>
<h3 id="Example-NiFi-Properties-Overrides"><a href="#Example-NiFi-Properties-Overrides" class="headerlink" title="Example NiFi Properties Overrides"></a>Example NiFi Properties Overrides</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">NiFi</span> <span class="string">Properties</span> <span class="attr">Overrides:</span></span><br><span class="line">  <span class="string">nifi.flowfile.repository.directory:</span> <span class="string">./flowfile_repository_override</span></span><br><span class="line">  <span class="string">nifi.content.repository.directory.default:</span> <span class="string">./content_repository_override</span></span><br><span class="line">  <span class="string">nifi.database.directory:</span> <span class="string">./database_repository_override</span></span><br></pre></td></tr></table></figure>
<h1 id="Example-Config-File"><a href="#Example-Config-File" class="headerlink" title="Example Config File"></a>Example Config File</h1><p>Below are two example config YAML files. The first tails the minifi-app.log, send the tailed log and provenance data back to a secure instance of NiFi. The second uses a series of processors to tail the app log, routes off only lines that contain “WriteAheadFlowFileRepository” and puts it as a file in the “./“ directory.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">MiNiFi</span> <span class="string">Config</span> <span class="attr">Version:</span> <span class="number">1</span></span><br><span class="line"><span class="string">Flow</span> <span class="attr">Controller:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">MiNiFi</span> <span class="string">Flow</span></span><br><span class="line"><span class="attr">    comment:</span></span><br><span class="line"></span><br><span class="line"><span class="string">Core</span> <span class="attr">Properties:</span></span><br><span class="line">    <span class="string">flow</span> <span class="string">controller</span> <span class="string">graceful</span> <span class="string">shutdown</span> <span class="attr">period:</span> <span class="number">10</span> <span class="string">sec</span></span><br><span class="line">    <span class="string">flow</span> <span class="string">service</span> <span class="string">write</span> <span class="string">delay</span> <span class="attr">interval:</span> <span class="number">500</span> <span class="string">ms</span></span><br><span class="line">    <span class="string">administrative</span> <span class="string">yield</span> <span class="attr">duration:</span> <span class="number">30</span> <span class="string">sec</span></span><br><span class="line">    <span class="string">bored</span> <span class="string">yield</span> <span class="attr">duration:</span> <span class="number">10</span> <span class="string">millis</span></span><br><span class="line"></span><br><span class="line"><span class="string">FlowFile</span> <span class="attr">Repository:</span></span><br><span class="line"><span class="attr">    partitions:</span> <span class="number">256</span></span><br><span class="line">    <span class="string">checkpoint</span> <span class="attr">interval:</span> <span class="number">2</span> <span class="string">mins</span></span><br><span class="line">    <span class="string">always</span> <span class="attr">sync:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    Swap:</span></span><br><span class="line"><span class="attr">        threshold:</span> <span class="number">20000</span></span><br><span class="line">        <span class="string">in</span> <span class="attr">period:</span> <span class="number">5</span> <span class="string">sec</span></span><br><span class="line">        <span class="string">in</span> <span class="attr">threads:</span> <span class="number">1</span></span><br><span class="line">        <span class="string">out</span> <span class="attr">period:</span> <span class="number">5</span> <span class="string">sec</span></span><br><span class="line">        <span class="string">out</span> <span class="attr">threads:</span> <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="string">Provenance</span> <span class="attr">Repository:</span></span><br><span class="line">    <span class="string">provenance</span> <span class="string">rollover</span> <span class="attr">time:</span> <span class="number">1</span> <span class="string">min</span></span><br><span class="line"></span><br><span class="line"><span class="string">Content</span> <span class="attr">Repository:</span></span><br><span class="line">    <span class="string">content</span> <span class="string">claim</span> <span class="string">max</span> <span class="string">appendable</span> <span class="attr">size:</span> <span class="number">10</span> <span class="string">MB</span></span><br><span class="line">    <span class="string">content</span> <span class="string">claim</span> <span class="string">max</span> <span class="string">flow</span> <span class="attr">files:</span> <span class="number">100</span></span><br><span class="line">    <span class="string">always</span> <span class="attr">sync:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="string">Component</span> <span class="string">Status</span> <span class="attr">Repository:</span></span><br><span class="line">    <span class="string">buffer</span> <span class="attr">size:</span> <span class="number">1440</span></span><br><span class="line">    <span class="string">snapshot</span> <span class="attr">frequency:</span> <span class="number">1</span> <span class="string">min</span></span><br><span class="line"></span><br><span class="line"><span class="string">Security</span> <span class="attr">Properties:</span></span><br><span class="line"><span class="attr">    keystore:</span> <span class="string">/tmp/ssl/localhost-ks.jks</span></span><br><span class="line">    <span class="string">keystore</span> <span class="attr">type:</span> <span class="string">JKS</span></span><br><span class="line">    <span class="string">keystore</span> <span class="attr">password:</span> <span class="string">localtest</span></span><br><span class="line">    <span class="string">key</span> <span class="attr">password:</span> <span class="string">localtest</span></span><br><span class="line"><span class="attr">    truststore:</span> <span class="string">/tmp/ssl/localhost-ts.jks</span></span><br><span class="line">    <span class="string">truststore</span> <span class="attr">type:</span> <span class="string">JKS</span></span><br><span class="line">    <span class="string">truststore</span> <span class="attr">password:</span> <span class="string">localtest</span></span><br><span class="line">    <span class="string">ssl</span> <span class="attr">protocol:</span> <span class="string">TLS</span></span><br><span class="line">    <span class="string">Sensitive</span> <span class="attr">Props:</span></span><br><span class="line"><span class="attr">        key:</span></span><br><span class="line"><span class="attr">        algorithm:</span> <span class="string">PBEWITHMD5AND256BITAES-CBC-OPENSSL</span></span><br><span class="line"><span class="attr">        provider:</span> <span class="string">BC</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Processors:</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">TailFile</span></span><br><span class="line"><span class="attr">      class:</span> <span class="string">org.apache.nifi.processors.standard.TailFile</span></span><br><span class="line">      <span class="string">max</span> <span class="string">concurrent</span> <span class="attr">tasks:</span> <span class="number">1</span></span><br><span class="line">      <span class="string">scheduling</span> <span class="attr">strategy:</span> <span class="string">TIMER_DRIVEN</span></span><br><span class="line">      <span class="string">scheduling</span> <span class="attr">period:</span> <span class="number">1</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">penalization</span> <span class="attr">period:</span> <span class="number">30</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">yield</span> <span class="attr">period:</span> <span class="number">1</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">run</span> <span class="string">duration</span> <span class="attr">nanos:</span> <span class="number">0</span></span><br><span class="line">      <span class="string">auto-terminated</span> <span class="string">relationships</span> <span class="attr">list:</span></span><br><span class="line"><span class="attr">      Properties:</span></span><br><span class="line">          <span class="string">File</span> <span class="string">to</span> <span class="attr">Tail:</span> <span class="string">logs/minifi-app.log</span></span><br><span class="line">          <span class="string">Rolling</span> <span class="string">Filename</span> <span class="attr">Pattern:</span> <span class="string">minifi-app*</span></span><br><span class="line">          <span class="string">Initial</span> <span class="string">Start</span> <span class="attr">Position:</span> <span class="string">Beginning</span> <span class="string">of</span> <span class="string">File</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Connections:</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">TailToS2S</span></span><br><span class="line">      <span class="string">source</span> <span class="attr">name:</span> <span class="string">TailFile</span></span><br><span class="line">      <span class="string">source</span> <span class="string">relationship</span> <span class="attr">name:</span> <span class="string">success</span></span><br><span class="line">      <span class="string">destination</span> <span class="attr">name:</span> <span class="number">8644</span><span class="string">cbcc-a45c-40e0-964d-5e536e2ada61</span></span><br><span class="line">      <span class="string">max</span> <span class="string">work</span> <span class="string">queue</span> <span class="attr">size:</span> <span class="number">0</span></span><br><span class="line">      <span class="string">max</span> <span class="string">work</span> <span class="string">queue</span> <span class="string">data</span> <span class="attr">size:</span> <span class="number">1</span> <span class="string">MB</span></span><br><span class="line">      <span class="string">flowfile</span> <span class="attr">expiration:</span> <span class="number">60</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">queue</span> <span class="string">prioritizer</span> <span class="attr">class:</span> <span class="string">org.apache.nifi.prioritizer.NewestFlowFileFirstPrioritizer</span></span><br><span class="line"></span><br><span class="line"><span class="string">Remote</span> <span class="string">Processing</span> <span class="attr">Groups:</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">NiFi</span> <span class="string">Flow</span></span><br><span class="line"><span class="attr">      comment:</span></span><br><span class="line"><span class="attr">      url:</span> <span class="attr">https://localhost:8090/nifi</span></span><br><span class="line"><span class="attr">      timeout:</span> <span class="number">30</span> <span class="string">secs</span></span><br><span class="line">      <span class="string">yield</span> <span class="attr">period:</span> <span class="number">10</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">Input</span> <span class="attr">Ports:</span></span><br><span class="line"><span class="attr">          - id:</span> <span class="number">8644</span><span class="string">cbcc-a45c-40e0-964d-5e536e2ada61</span></span><br><span class="line"><span class="attr">            name:</span> <span class="string">tailed</span> <span class="string">log</span></span><br><span class="line"><span class="attr">            comments:</span></span><br><span class="line">            <span class="string">max</span> <span class="string">concurrent</span> <span class="attr">tasks:</span> <span class="number">1</span></span><br><span class="line">            <span class="string">use</span> <span class="attr">compression:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="string">Provenance</span> <span class="attr">Reporting:</span></span><br><span class="line"><span class="attr">    comment:</span></span><br><span class="line">    <span class="string">scheduling</span> <span class="attr">strategy:</span> <span class="string">TIMER_DRIVEN</span></span><br><span class="line">    <span class="string">scheduling</span> <span class="attr">period:</span> <span class="number">30</span> <span class="string">sec</span></span><br><span class="line">    <span class="string">destination</span> <span class="attr">url:</span> <span class="attr">https://localhost:8090/</span></span><br><span class="line">    <span class="string">port</span> <span class="attr">name:</span> <span class="string">provenance</span></span><br><span class="line">    <span class="string">originating</span> <span class="attr">url:</span> <span class="attr">http://$&#123;hostname(true)&#125;:8081/nifi</span></span><br><span class="line">    <span class="string">use</span> <span class="attr">compression:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    timeout:</span> <span class="number">30</span> <span class="string">secs</span></span><br><span class="line">    <span class="string">batch</span> <span class="attr">size:</span> <span class="number">1000</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">Flow</span> <span class="attr">Controller:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">MiNiFi</span> <span class="string">Flow</span></span><br><span class="line"><span class="attr">    comment:</span></span><br><span class="line"></span><br><span class="line"><span class="string">Core</span> <span class="attr">Properties:</span></span><br><span class="line">    <span class="string">flow</span> <span class="string">controller</span> <span class="string">graceful</span> <span class="string">shutdown</span> <span class="attr">period:</span> <span class="number">10</span> <span class="string">sec</span></span><br><span class="line">    <span class="string">flow</span> <span class="string">service</span> <span class="string">write</span> <span class="string">delay</span> <span class="attr">interval:</span> <span class="number">500</span> <span class="string">ms</span></span><br><span class="line">    <span class="string">administrative</span> <span class="string">yield</span> <span class="attr">duration:</span> <span class="number">30</span> <span class="string">sec</span></span><br><span class="line">    <span class="string">bored</span> <span class="string">yield</span> <span class="attr">duration:</span> <span class="number">10</span> <span class="string">millis</span></span><br><span class="line">    <span class="string">max</span> <span class="string">concurrent</span> <span class="attr">threads:</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="string">FlowFile</span> <span class="attr">Repository:</span></span><br><span class="line"><span class="attr">    partitions:</span> <span class="number">256</span></span><br><span class="line">    <span class="string">checkpoint</span> <span class="attr">interval:</span> <span class="number">2</span> <span class="string">mins</span></span><br><span class="line">    <span class="string">always</span> <span class="attr">sync:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    Swap:</span></span><br><span class="line"><span class="attr">        threshold:</span> <span class="number">20000</span></span><br><span class="line">        <span class="string">in</span> <span class="attr">period:</span> <span class="number">5</span> <span class="string">sec</span></span><br><span class="line">        <span class="string">in</span> <span class="attr">threads:</span> <span class="number">1</span></span><br><span class="line">        <span class="string">out</span> <span class="attr">period:</span> <span class="number">5</span> <span class="string">sec</span></span><br><span class="line">        <span class="string">out</span> <span class="attr">threads:</span> <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="string">Content</span> <span class="attr">Repository:</span></span><br><span class="line">    <span class="string">content</span> <span class="string">claim</span> <span class="string">max</span> <span class="string">appendable</span> <span class="attr">size:</span> <span class="number">10</span> <span class="string">MB</span></span><br><span class="line">    <span class="string">content</span> <span class="string">claim</span> <span class="string">max</span> <span class="string">flow</span> <span class="attr">files:</span> <span class="number">100</span></span><br><span class="line">    <span class="string">always</span> <span class="attr">sync:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="string">Component</span> <span class="string">Status</span> <span class="attr">Repository:</span></span><br><span class="line">    <span class="string">buffer</span> <span class="attr">size:</span> <span class="number">1440</span></span><br><span class="line">    <span class="string">snapshot</span> <span class="attr">frequency:</span> <span class="number">1</span> <span class="string">min</span></span><br><span class="line"></span><br><span class="line"><span class="string">Security</span> <span class="attr">Properties:</span></span><br><span class="line"><span class="attr">    keystore:</span> <span class="string">/tmp/ssl/localhost-ks.jks</span></span><br><span class="line">    <span class="string">keystore</span> <span class="attr">type:</span> <span class="string">JKS</span></span><br><span class="line">    <span class="string">keystore</span> <span class="attr">password:</span> <span class="string">localtest</span></span><br><span class="line">    <span class="string">key</span> <span class="attr">password:</span> <span class="string">localtest</span></span><br><span class="line"><span class="attr">    truststore:</span> <span class="string">/tmp/ssl/localhost-ts.jks</span></span><br><span class="line">    <span class="string">truststore</span> <span class="attr">type:</span> <span class="string">JKS</span></span><br><span class="line">    <span class="string">truststore</span> <span class="attr">password:</span> <span class="string">localtest</span></span><br><span class="line">    <span class="string">ssl</span> <span class="attr">protocol:</span> <span class="string">TLS</span></span><br><span class="line">    <span class="string">Sensitive</span> <span class="attr">Props:</span></span><br><span class="line"><span class="attr">        key:</span></span><br><span class="line"><span class="attr">        algorithm:</span> <span class="string">PBEWITHMD5AND256BITAES-CBC-OPENSSL</span></span><br><span class="line"><span class="attr">        provider:</span> <span class="string">BC</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Processors:</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">TailAppLog</span></span><br><span class="line"><span class="attr">      class:</span> <span class="string">org.apache.nifi.processors.standard.TailFile</span></span><br><span class="line">      <span class="string">max</span> <span class="string">concurrent</span> <span class="attr">tasks:</span> <span class="number">1</span></span><br><span class="line">      <span class="string">scheduling</span> <span class="attr">strategy:</span> <span class="string">TIMER_DRIVEN</span></span><br><span class="line">      <span class="string">scheduling</span> <span class="attr">period:</span> <span class="number">10</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">penalization</span> <span class="attr">period:</span> <span class="number">30</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">yield</span> <span class="attr">period:</span> <span class="number">1</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">run</span> <span class="string">duration</span> <span class="attr">nanos:</span> <span class="number">0</span></span><br><span class="line">      <span class="string">auto-terminated</span> <span class="string">relationships</span> <span class="attr">list:</span></span><br><span class="line"><span class="attr">      Properties:</span></span><br><span class="line">          <span class="string">File</span> <span class="string">to</span> <span class="attr">Tail:</span> <span class="string">logs/minifi-app.log</span></span><br><span class="line">          <span class="string">Rolling</span> <span class="string">Filename</span> <span class="attr">Pattern:</span> <span class="string">minifi-app*</span></span><br><span class="line">          <span class="string">Initial</span> <span class="string">Start</span> <span class="attr">Position:</span> <span class="string">Beginning</span> <span class="string">of</span> <span class="string">File</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">SplitIntoSingleLines</span></span><br><span class="line"><span class="attr">      class:</span> <span class="string">org.apache.nifi.processors.standard.SplitText</span></span><br><span class="line">      <span class="string">max</span> <span class="string">concurrent</span> <span class="attr">tasks:</span> <span class="number">1</span></span><br><span class="line">      <span class="string">scheduling</span> <span class="attr">strategy:</span> <span class="string">TIMER_DRIVEN</span></span><br><span class="line">      <span class="string">scheduling</span> <span class="attr">period:</span> <span class="number">0</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">penalization</span> <span class="attr">period:</span> <span class="number">30</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">yield</span> <span class="attr">period:</span> <span class="number">1</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">run</span> <span class="string">duration</span> <span class="attr">nanos:</span> <span class="number">0</span></span><br><span class="line">      <span class="string">auto-terminated</span> <span class="string">relationships</span> <span class="attr">list:</span></span><br><span class="line"><span class="bullet">          -</span> <span class="string">failure</span></span><br><span class="line"><span class="bullet">          -</span> <span class="string">original</span></span><br><span class="line"><span class="attr">      Properties:</span></span><br><span class="line">          <span class="string">Line</span> <span class="string">Split</span> <span class="attr">Count:</span> <span class="number">1</span></span><br><span class="line">          <span class="string">Header</span> <span class="string">Line</span> <span class="attr">Count:</span> <span class="number">0</span></span><br><span class="line">          <span class="string">Remove</span> <span class="string">Trailing</span> <span class="attr">Newlines:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">RouteErrors</span></span><br><span class="line"><span class="attr">      class:</span> <span class="string">org.apache.nifi.processors.standard.RouteText</span></span><br><span class="line">      <span class="string">max</span> <span class="string">concurrent</span> <span class="attr">tasks:</span> <span class="number">1</span></span><br><span class="line">      <span class="string">scheduling</span> <span class="attr">strategy:</span> <span class="string">TIMER_DRIVEN</span></span><br><span class="line">      <span class="string">scheduling</span> <span class="attr">period:</span> <span class="number">0</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">penalization</span> <span class="attr">period:</span> <span class="number">30</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">yield</span> <span class="attr">period:</span> <span class="number">1</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">run</span> <span class="string">duration</span> <span class="attr">nanos:</span> <span class="number">0</span></span><br><span class="line">      <span class="string">auto-terminated</span> <span class="string">relationships</span> <span class="attr">list:</span></span><br><span class="line"><span class="bullet">          -</span> <span class="string">unmatched</span></span><br><span class="line"><span class="bullet">          -</span> <span class="string">original</span></span><br><span class="line"><span class="attr">      Properties:</span></span><br><span class="line">          <span class="string">Routing</span> <span class="attr">Strategy:</span> <span class="string">Route</span> <span class="string">to</span> <span class="string">'matched'</span> <span class="string">if</span> <span class="string">line</span> <span class="string">matches</span> <span class="string">all</span> <span class="string">conditions</span></span><br><span class="line">          <span class="string">Matching</span> <span class="attr">Strategy:</span> <span class="string">Contains</span></span><br><span class="line">          <span class="string">Character</span> <span class="attr">Set:</span> <span class="string">UTF-8</span></span><br><span class="line">          <span class="string">Ignore</span> <span class="string">Leading/Trailing</span> <span class="attr">Whitespace:</span> <span class="literal">true</span></span><br><span class="line">          <span class="string">Ignore</span> <span class="attr">Case:</span> <span class="literal">true</span></span><br><span class="line">          <span class="string">Grouping</span> <span class="string">Regular</span> <span class="attr">Expression:</span></span><br><span class="line"><span class="attr">          WALFFR:</span> <span class="string">WriteAheadFlowFileRepository</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">PutFile</span></span><br><span class="line"><span class="attr">      class:</span> <span class="string">org.apache.nifi.processors.standard.PutFile</span></span><br><span class="line">      <span class="string">max</span> <span class="string">concurrent</span> <span class="attr">tasks:</span> <span class="number">1</span></span><br><span class="line">      <span class="string">scheduling</span> <span class="attr">strategy:</span> <span class="string">TIMER_DRIVEN</span></span><br><span class="line">      <span class="string">scheduling</span> <span class="attr">period:</span> <span class="number">0</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">penalization</span> <span class="attr">period:</span> <span class="number">30</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">yield</span> <span class="attr">period:</span> <span class="number">1</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">run</span> <span class="string">duration</span> <span class="attr">nanos:</span> <span class="number">0</span></span><br><span class="line">      <span class="string">auto-terminated</span> <span class="string">relationships</span> <span class="attr">list:</span></span><br><span class="line"><span class="bullet">          -</span> <span class="string">failure</span></span><br><span class="line"><span class="bullet">          -</span> <span class="string">success</span></span><br><span class="line"><span class="attr">      Properties:</span></span><br><span class="line"><span class="attr">          Directory:</span> <span class="string">./</span></span><br><span class="line">          <span class="string">Conflict</span> <span class="string">Resolution</span> <span class="attr">Strategy:</span> <span class="string">replace</span></span><br><span class="line">          <span class="string">Create</span> <span class="string">Missing</span> <span class="attr">Directories:</span> <span class="literal">true</span></span><br><span class="line">          <span class="string">Maximum</span> <span class="string">File</span> <span class="attr">Count:</span></span><br><span class="line">          <span class="string">Last</span> <span class="string">Modified</span> <span class="attr">Time:</span></span><br><span class="line"><span class="attr">          Permissions:</span></span><br><span class="line"><span class="attr">          Owner:</span></span><br><span class="line"><span class="attr">          Group:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Connections:</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">TailToSplit</span></span><br><span class="line">      <span class="string">source</span> <span class="attr">name:</span> <span class="string">TailAppLog</span></span><br><span class="line">      <span class="string">source</span> <span class="string">relationship</span> <span class="attr">name:</span> <span class="string">success</span></span><br><span class="line">      <span class="string">destination</span> <span class="attr">name:</span> <span class="string">SplitIntoSingleLines</span></span><br><span class="line">      <span class="string">max</span> <span class="string">work</span> <span class="string">queue</span> <span class="attr">size:</span> <span class="number">0</span></span><br><span class="line">      <span class="string">max</span> <span class="string">work</span> <span class="string">queue</span> <span class="string">data</span> <span class="attr">size:</span> <span class="number">1</span> <span class="string">MB</span></span><br><span class="line">      <span class="string">flowfile</span> <span class="attr">expiration:</span> <span class="number">60</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">queue</span> <span class="string">prioritizer</span> <span class="attr">class:</span> <span class="string">org.apache.nifi.prioritizer.NewestFlowFileFirstPrioritizer</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">SplitToRoute</span></span><br><span class="line">      <span class="string">source</span> <span class="attr">name:</span> <span class="string">SplitIntoSingleLines</span></span><br><span class="line">      <span class="string">source</span> <span class="string">relationship</span> <span class="attr">name:</span> <span class="string">splits</span></span><br><span class="line">      <span class="string">destination</span> <span class="attr">name:</span> <span class="string">RouteErrors</span></span><br><span class="line">      <span class="string">max</span> <span class="string">work</span> <span class="string">queue</span> <span class="attr">size:</span> <span class="number">0</span></span><br><span class="line">      <span class="string">max</span> <span class="string">work</span> <span class="string">queue</span> <span class="string">data</span> <span class="attr">size:</span> <span class="number">1</span> <span class="string">MB</span></span><br><span class="line">      <span class="string">flowfile</span> <span class="attr">expiration:</span> <span class="number">60</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">queue</span> <span class="string">prioritizer</span> <span class="attr">class:</span> <span class="string">org.apache.nifi.prioritizer.NewestFlowFileFirstPrioritizer</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">RouteToS2S</span></span><br><span class="line">      <span class="string">source</span> <span class="attr">name:</span> <span class="string">RouteErrors</span></span><br><span class="line">      <span class="string">source</span> <span class="string">relationship</span> <span class="attr">name:</span> <span class="string">matched</span></span><br><span class="line">      <span class="string">destination</span> <span class="attr">name:</span> <span class="string">PutFile</span></span><br><span class="line">      <span class="string">max</span> <span class="string">work</span> <span class="string">queue</span> <span class="attr">size:</span> <span class="number">0</span></span><br><span class="line">      <span class="string">max</span> <span class="string">work</span> <span class="string">queue</span> <span class="string">data</span> <span class="attr">size:</span> <span class="number">1</span> <span class="string">MB</span></span><br><span class="line">      <span class="string">flowfile</span> <span class="attr">expiration:</span> <span class="number">60</span> <span class="string">sec</span></span><br><span class="line">      <span class="string">queue</span> <span class="string">prioritizer</span> <span class="attr">class:</span> <span class="string">org.apache.nifi.prioritizer.NewestFlowFileFirstPrioritizer</span></span><br><span class="line"></span><br><span class="line"><span class="string">Provenance</span> <span class="attr">Reporting:</span></span><br><span class="line"><span class="attr">    comment:</span></span><br><span class="line">    <span class="string">scheduling</span> <span class="attr">strategy:</span> <span class="string">TIMER_DRIVEN</span></span><br><span class="line">    <span class="string">scheduling</span> <span class="attr">period:</span> <span class="number">30</span> <span class="string">sec</span></span><br><span class="line">    <span class="string">destination</span> <span class="attr">url:</span> <span class="attr">https://localhost:8080/</span></span><br><span class="line">    <span class="string">port</span> <span class="attr">name:</span> <span class="string">provenance</span></span><br><span class="line">    <span class="string">originating</span> <span class="attr">url:</span> <span class="attr">http://$&#123;hostname(true)&#125;:8081/nifi</span></span><br><span class="line">    <span class="string">use</span> <span class="attr">compression:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    timeout:</span> <span class="number">30</span> <span class="string">secs</span></span><br><span class="line">    <span class="string">batch</span> <span class="attr">size:</span> <span class="number">1000</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/05/15/System_Admin_Guide/" data-id="cjoxqb77h000bfe8kpmpb5g9u" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/11/11/postgresql_support_guide/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          重启postgreSQL
        
      </div>
    </a>
  
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Platform/">Platform</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cloudera/">Cloudera</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HDP/">HDP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HUE/">HUE</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Cloudera/" style="font-size: 10px;">Cloudera</a> <a href="/tags/HDP/" style="font-size: 20px;">HDP</a> <a href="/tags/HUE/" style="font-size: 10px;">HUE</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/11/26/Hadoop_combine_small_files/">(no title)</a>
          </li>
        
          <li>
            <a href="/2018/11/23/install_hue_on_hortonworks/">HUE Support Guide</a>
          </li>
        
          <li>
            <a href="/2018/11/11/add_or_delete_hdp_hosts_client/">新增或删除hdp平台某个host组件的client命令</a>
          </li>
        
          <li>
            <a href="/2018/11/11/postgresql_support_guide/">重启postgreSQL</a>
          </li>
        
          <li>
            <a href="/2017/05/15/System_Admin_Guide/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Ma,Shi-Cheng<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>